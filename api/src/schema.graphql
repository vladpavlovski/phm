scalar Point
scalar Date
scalar DateTime
scalar Time
scalar Long

enum Role {
  reader
  user
  admin
}

enum ActivityStatus {
  ACTIVE
  INACTIVE
  UNKNOWN
  RETIRED
}

type S3Payload {
  signedRequest: String!
  url: String!
}

interface Human {
  name: String
  firstName: String!
  lastName: String!
  birthday: Date
  userName: String @unique
  phone: String @unique
  email: String @unique
  gender: String
  height: String
  weight: String
  externalId: String
  activityStatus: String
  country: String
  city: String
  createdAt: DateTime
  updatedAt: DateTime
}

type Player implements Human {
  playerId: ID! @id
  name: String
  firstName: String!
  lastName: String!
  birthday: Date
  userName: String @unique
  phone: String @unique
  email: String @unique
  gender: String
  stick: String
  height: String
  weight: String
  externalId: String
  activityStatus: String
  countryBirth: String
  cityBirth: String
  country: String
  city: String
  avatar: String
  createdAt: DateTime
  updatedAt: DateTime

  user: User @relation(name: "ACCOUNT_FOR", direction: IN)
  meta: MetaPlayer @relation(name: "META_FOR", direction: IN)
  teams: [Team] @relation(name: "PLAY_IN", direction: OUT)
  positions: [Position] @relation(name: "HAS_POSITION", direction: OUT)
  jerseys: [Jersey] @relation(name: "HAS_JERSEY", direction: OUT)
  achievements: [Achievement] @relation(name: "HAS_ACHIEVEMENT", direction: OUT)
  awards: [Award] @relation(name: "WIN_AN_AWARD", direction: OUT)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  events: [Event] @relation(name: "ORGANIZE_AN", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  metaHistories: [MetaHistory] @relation(name: "META_FOR", direction: IN)
  games: [TakingPartIn]
}

# Faceoff
# Goal + Assistence/Pass
# GoalShots
# Penalty
# Penalty shots
# Injuries
# Saves

type Mutation {
  CreateJerseys(teamId: ID!, nameBase: String!): [Jersey!]
    @cypher(
      statement: """
      MATCH (t:Team {teamId: $teamId})
      UNWIND range(1, 99) as numberRange
      CREATE (j:Jersey {
        jerseyId: apoc.create.uuid(),
        number: numberRange,
        name: $nameBase + ' - ' + numberRange
      })
      CREATE (j) <- [r:USE_JERSEY] - (t)
      RETURN j
      ORDER BY j.number ASC
      """
    )

  CreateTeamDefaultPositions(teamId: ID!, systemSettingsId: ID!): [Position!]
    @cypher(
      statement: """
      MATCH (team: Team {teamId: $teamId})
      MATCH (systemSettings: SystemSettings {
        systemSettingsId: $systemSettingsId
        }) - [:GUIDED_DEFAULT_BY]
        - (rulePack: RulePack)
        - [:SET_UP] -> (positionTypes: PositionType)
      UNWIND positionTypes AS positions
      CREATE (newPosition: Position {
        positionId: apoc.create.uuid(),
        name: positions.name,
        short: positions.short,
        description: positions.description,
        fromDefault: true
      })
      CREATE (newPosition) <- [:USE_POSITION] - (team)
      return newPosition
      """
    )
  CreateGameEventSimple(
    teamId: ID!
    gameId: ID!
    gameEventSimpleId: ID!
    previousGameEventSimpleId: ID
    metaPlayerScoredById: ID
    metaPlayerAllowedById: ID
    metaPlayerFirstAssistId: ID
    metaPlayerSecondAssistId: ID
    metaPlayerSavedById: ID
    metaPlayerLostById: ID
    metaPlayerWonById: ID
    eventType: String
    timestamp: String
    period: String
    remainingTime: String
    goalType: String
    goalSubType: String
    shotType: String
    shotSubType: String
  ): GameEventSimple!
    @cypher(
      statement: """
      MATCH (game: Game {gameId: $gameId})
      MATCH (team: Team {teamId: $teamId})
      CREATE (ges: GameEventSimple {
          gameEventSimpleId: $gameEventSimpleId,
          eventType: $eventType,
          timestamp: $timestamp,
          period: $period,
          remainingTime: $remainingTime,
          goalType: $goalType,
          goalSubType: $goalSubType,
          shotType: $shotType,
          shotSubType: $shotSubType
      })
      CREATE (ges) <- [:INITIATES_SIMPLE] - (game)
      CREATE (team) <- [:CREATED_BY] - (ges)

      WITH ges, team, game, $metaPlayerScoredById as metaPlayerScoredById, $metaPlayerFirstAssistId as metaPlayerFirstAssistId, $metaPlayerSecondAssistId as metaPlayerSecondAssistId, $metaPlayerAllowedById as metaPlayerAllowedById, $previousGameEventSimpleId as previousGameEventSimpleId, $metaPlayerSavedById as metaPlayerSavedById, $metaPlayerLostById as metaPlayerLostById, $metaPlayerWonById as metaPlayerWonById
      CALL apoc.do.when(
          $metaPlayerScoredById IS NOT NULL,
          "MATCH (metaPlayerScoredBy: MetaPlayer {metaPlayerId: metaPlayerScoredById})
          CREATE (metaPlayerScoredBy) <- [:SCORED_BY] - (ges)
          RETURN metaPlayerScoredBy
          ",
          '',
          {
            ges: ges,
            metaPlayerScoredById: metaPlayerScoredById
          }
      )
      YIELD value as metaPlayerScoredBy

      WITH ges, metaPlayerFirstAssistId, metaPlayerSecondAssistId, metaPlayerAllowedById, previousGameEventSimpleId, metaPlayerSavedById, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerFirstAssistId IS NOT NULL,
          "MATCH (metaPlayerFirstAssist: MetaPlayer {metaPlayerId: metaPlayerFirstAssistId})
          CREATE (metaPlayerFirstAssist) <- [:FIRST_ASSIST_BY] - (ges)
          RETURN metaPlayerFirstAssist
          ",
          '',
          {
            ges: ges,
            metaPlayerFirstAssistId: metaPlayerFirstAssistId
          }
      )
      YIELD value as metaPlayerFirstAssist

      WITH ges, metaPlayerSecondAssistId, metaPlayerAllowedById, previousGameEventSimpleId, metaPlayerSavedById, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerSecondAssistId IS NOT NULL,
          "MATCH (metaPlayerSecondAssist: MetaPlayer {metaPlayerId: metaPlayerSecondAssistId})
          CREATE (metaPlayerSecondAssist) <- [:SECOND_ASSIST_BY] - (ges)
          RETURN metaPlayerSecondAssist
          ",
          '',
          {
            ges: ges,
            metaPlayerSecondAssistId: metaPlayerSecondAssistId
          }
      )
      YIELD value as metaPlayerSecondAssist

      WITH ges, metaPlayerAllowedById, previousGameEventSimpleId, metaPlayerSavedById, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerAllowedById IS NOT NULL,
          "MATCH (metaPlayerAllowedBy: MetaPlayer {metaPlayerId: metaPlayerAllowedById})
          CREATE (metaPlayerAllowedBy) <- [:ALLOWED_BY] - (ges)
          RETURN metaPlayerAllowedBy
          ",
          '',
          {
            ges: ges,
            metaPlayerAllowedById: metaPlayerAllowedById
          }
      )
      YIELD value as metaPlayerAllowedBy

      WITH ges, previousGameEventSimpleId, metaPlayerSavedById, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerSavedById IS NOT NULL,
          "MATCH (metaPlayerSavedBy: MetaPlayer {metaPlayerId: metaPlayerSavedById})
          CREATE (metaPlayerSavedBy) <- [:SAVED_BY] - (ges)
          RETURN metaPlayerSavedBy
          ",
          '',
          {
            ges: ges,
            metaPlayerSavedById: metaPlayerSavedById
          }
      )
      YIELD value as metaPlayerSavedBy

      WITH ges, previousGameEventSimpleId, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          previousGameEventSimpleId IS NOT NULL,
          "MATCH (previousGameEventSimple: GameEventSimple {gameEventSimpleId: previousGameEventSimpleId})
          CREATE (previousGameEventSimple) <- [:PREVIOUS_GAME_EVENT] - (ges)
          RETURN previousGameEventSimple
          ",
          '',
          {
            ges: ges,
            previousGameEventSimpleId: previousGameEventSimpleId
          }
      )
      YIELD value as previousGameEventSimple

      WITH ges, metaPlayerWonById, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerWonById IS NOT NULL,
          "MATCH (metaPlayerWonBy: MetaPlayer { metaPlayerId: metaPlayerWonById })
          CREATE (metaPlayerWonBy) <- [:WON_BY] - (ges)
          RETURN metaPlayerWonBy
          ",
          '',
          {
            ges: ges,
            metaPlayerWonById: metaPlayerWonById
          }
      )
      YIELD value as metaPlayerWonBy

      WITH ges, metaPlayerLostById

      CALL apoc.do.when(
          metaPlayerLostById IS NOT NULL,
          "MATCH (metaPlayerLostBy: MetaPlayer { metaPlayerId: metaPlayerLostById })
          CREATE (metaPlayerLostBy) <- [:LOST_BY] - (ges)
          RETURN metaPlayerLostBy
          ",
          '',
          {
            ges: ges,
            metaPlayerLostById: metaPlayerLostById
          }
      )
      YIELD value as metaPlayerLostBy

      RETURN ges
      """
    )
}
#todo metaPlayerWonById, metaPlayerLostById call apoc

# MATCH (game: Game {gameId: '725f4bb8-0d12-4b08-9df9-a9bfbf399b10'})
# MATCH (team: Team {teamId: '8c798530-f57a-4c6f-bbac-1e7e40e4cfa8'})
# MATCH (metaPlayerScoredBy: MetaPlayer {metaPlayerId: '158df0f3-bbfe-4572-9321-7557ea6f9650'})
# MATCH (metaPlayerAllowedBy: MetaPlayer {metaPlayerId: ''})
# MATCH (metaPlayerFirstAssist: MetaPlayer {metaPlayerId: ''})
# MATCH (metaPlayerSecondAssist: MetaPlayer {metaPlayerId: ''})

# CREATE (ges: GameEventSimple, {
#     gameEventSimpleId: 'ges1',
#     eventType: 'goal',
#     timestamp: '2021-06-01T22:18:03+02:00',
#     period: '1',
#     remainingTime: '14:32',
#     type: 'cool',
#     subType: 'subCool',
# })
# CREATE (ges) <- [:INITIATES_SIMPLE] - (game)
# CREATE (team) <- [:CREATED_BY] - (ges)
# CREATE (metaPlayerScoredBy) <- [:SCORED_BY] - (ges)
# CREATE (metaPlayerAllowedBy) <- [:ALLOWED_BY] - (ges)
# CREATE (metaPlayerFirstAssist) <- [:FIRST_ASSIST_BY] - (ges)
# CREATE (metaPlayerSecondAssist) <- [:SECOND_ASSIST_BY] - (ges)

# return ges

# MATCH (game: Game {gameId: '725f4bb8-0d12-4b08-9df9-a9bfbf399b10'})
# MATCH (team: Team {teamId: '8c798530-f57a-4c6f-bbac-1e7e40e4cfa8'})
# CREATE (ges: GameEventSimple {
#     gameEventSimpleId: 'ges1',
#     eventType: 'goal',
#     timestamp: '2021-06-01T22:18:03+02:00',
#     period: '1',
#     remainingTime: '14:32',
#     type: 'cool',
#     subType: 'subCool'
# })

# CREATE (ges) <- [:INITIATES_SIMPLE] - (game)
# CREATE (team) <- [:CREATED_BY] - (ges)
# WITH ges, team, game
# unwind '158df0f3-bbfe-4572-9321-7557ea6f9650' as metaPlayerScoredById
# unwind 'f25916a4-df52-447f-9583-d5c25ae235f0' as metaPlayerFirstAssistId
# WITH  ges, metaPlayerScoredById, team, game, metaPlayerFirstAssistId
# CALL apoc.do.when(
#     metaPlayerScoredById <> '',
#     "MATCH (metaPlayerScoredBy: MetaPlayer {metaPlayerId: metaPlayerScoredById})
#     CREATE (metaPlayerScoredBy) <- [:SCORED_BY] - (ges)
#     return metaPlayerScoredBy
#     ",
#     '',
#     {
#         ges: ges,
#         metaPlayerScoredById: metaPlayerScoredById
#     }
# )
# YIELD value as metaPlayerScoredBy

# WITH  ges, metaPlayerScoredBy, team, game, metaPlayerFirstAssistId
# CALL apoc.do.when(
#     metaPlayerFirstAssistId <> '',
#     "MATCH (metaPlayerFirstAssist: MetaPlayer {metaPlayerId: metaPlayerFirstAssistId})
#     CREATE (metaPlayerFirstAssist) <- [:ALLOWED_BY] - (ges)
#     return metaPlayerFirstAssist
#     ",
#     '',
#     {
#         ges: ges,
#         metaPlayerFirstAssistId: metaPlayerFirstAssistId
#     }
# )
# YIELD value as metaPlayerFirstAssist

# return ges, metaPlayerScoredBy, metaPlayerFirstAssist, team, game

type Query {
  organizationBySlug(organizationSlug: String!): Organization
    @cypher(
      statement: """
      MATCH (organization: Organization {urlSlug: $organizationSlug})
      return organization
      """
    )
  teamsByOrganization(organizationSlug: String!): [Team]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:PARTICIPATE_IN] - (team: Team)
      return team
      """
    )
  playersByOrganization(organizationSlug: String!): [Player]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:PARTICIPATE_IN] - (Team) - [:PLAY_IN] - (player: Player)
      return player
      """
    )
  personsByOrganization(organizationSlug: String!): [Person]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:ENGAGED_IN] - (person:Person)
      return person
      """
    )
  competitionsByOrganization(organizationSlug: String!): [Competition]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:OWNED_BY] - (competition:Competition)
      return competition
      """
    )
  sponsorsByOrganization(organizationSlug: String!): [Sponsor]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:ENGAGED_IN] - (sponsor:Sponsor)
      return sponsor
      """
    )
  seasonsByOrganization(organizationSlug: String!): [Season]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:OWNED_BY] - (competition:Competition) - [:BELONGS_TO] - (season:Season)
      return season
      """
    )
  awardsByOrganization(organizationSlug: String!): [Award]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:PROVIDED_BY] - (award:Award)
      return award
      """
    )
  rulePacksByOrganization(organizationSlug: String!): [RulePack]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:PROVIDED_BY] - (rulePack:RulePack)
      return rulePack
      """
    )
  eventsByOrganization(organizationSlug: String!): [Event]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:CREATE_IN] - (event:Event)
      return event
      """
    )
  gamesByOrganization(organizationSlug: String!): [Game]
    @cypher(
      statement: """
      MATCH (Organization {urlSlug: $organizationSlug}) - [:PROVIDED_BY] - (game:Game)
      return game
      """
    )
  gameEventsSimpleByGameId(gameId: ID!): [GameEventSimple]
    @cypher(
      statement: """
      MATCH (Game { gameId: $gameId }) - [:INITIATES_SIMPLE] -> (ges: GameEventSimple)
      return ges
      """
    )
}

type MetaPlayer {
  metaPlayerId: ID! @id
  player: Player @relation(name: "META_FOR", direction: OUT)
  availabilityStatus: AvailabilityStatus
    @relation(name: "GAME_READY_FOR", direction: IN)
  transfers: [Transfer] @relation(name: "TRANSFER_FOR_PLAYER", direction: IN)
  stars: [Star] @relation(name: "IS_STAR", direction: IN)
  collectedPasses: [Pass] @relation(name: "COLLECT_BY", direction: IN)
  sentPasses: [Pass] @relation(name: "SENT_BY", direction: IN)
  offsides: [Offside] @relation(name: "CAUSED_BY", direction: IN)
  scoredGoals: [Goal] @relation(name: "SCORED_BY", direction: IN)
  allowedGoals: [Goal] @relation(name: "ALLOWED_BY", direction: IN)
  firedShots: [Shot] @relation(name: "FIRED_BY", direction: IN)
  blockedShots: [Shot] @relation(name: "BLOCKED_BY", direction: IN)
  facedShots: [Shot] @relation(name: "FACED_TO", direction: IN)
  executedPenaltyShots: [PenaltyShot]
    @relation(name: "EXECUTED_BY", direction: IN)
  facedPenaltyShots: [PenaltyShot]
    @relation(name: "FACED_AGAINST", direction: IN)
  penalties: [Penalty] @relation(name: "PENALIZED", direction: IN)
  intervalOnIce: [IntervalOnIce] @relation(name: "SPENT_BY", direction: IN)
  fights: [Fight] @relation(name: "PARTICIPATE_IN", direction: IN)
  lostFaceOffs: [FaceOff] @relation(name: "LOST_BY", direction: IN)
  wonFaceOffs: [FaceOff] @relation(name: "WON_BY", direction: IN)
  icings: [Icing] @relation(name: "CAUSED_BY", direction: IN)
  lostTakeOvers: [TakeOver] @relation(name: "LOST_BY", direction: IN)
  richedTakeOvers: [TakeOver] @relation(name: "RICHED_BY", direction: IN)
  hits: [Hit] @relation(name: "GIVE_BY", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  eventsGoal: [GameEventSimple] @relation(name: "SCORED_BY", direction: IN)
  eventsAllowedGoal: [GameEventSimple]
    @relation(name: "ALLOWED_BY", direction: IN)
  eventsFirstAssist: [GameEventSimple]
    @relation(name: "FIRST_ASSIST_BY", direction: IN)
  eventsSecondAssist: [GameEventSimple]
    @relation(name: "SECOND_ASSIST_BY", direction: IN)
  eventsLostBy: [GameEventSimple] @relation(name: "LOST_BY", direction: IN)
  eventsWonBy: [GameEventSimple] @relation(name: "WON_BY", direction: IN)
}

type MetaHistory {
  metaHistoryId: ID! @id
  name: String
  rating: Float
  lineups: Int
  scoredGoals: Int
  assists: Int
  points: Int
  penalties: Int
  stars: Int
  allowedGoals: Int
  percentage: Float
  facedShots: Int
  shutOuts: Int
  average: Float
  player: Player @relation(name: "META_FOR", direction: OUT)
  season: Season @relation(name: "PARTICIPATE_IN", direction: OUT)
  competition: Competition @relation(name: "PARTICIPATE_IN", direction: OUT)
}

# person types: :TeamManager :Manager :Coach :CoachAssistant :Medic :Supporter :Referee :TimePicker :GameOfficial :LeagueOfficial

type Person implements Human {
  personId: ID! @id
  name: String
  firstName: String!
  lastName: String!
  birthday: Date
  userName: String @unique
  phone: String @unique
  email: String @unique
  gender: String
  height: String
  weight: String
  externalId: String
  activityStatus: String
  countryBirth: String
  cityBirth: String
  country: String
  city: String
  avatar: String
  createdAt: DateTime
  updatedAt: DateTime
  user: User @relation(name: "ACCOUNT_FOR", direction: IN)
  managers: [Person] @relation(name: "HAS_MANAGER", direction: OUT)
  teams: [Team] @relation(name: "HAS_TEAM_STAFF", direction: IN)
  games: [Game] @relation(name: "HAS_GAME_STAFF", direction: IN)
  competitions: [Competition]
    @relation(name: "HAS_COMPETITION_STAFF", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  payments: [Payment] @relation(name: "INITIATES_PAYMENT", direction: OUT)
  organizations: [Organization]
    @relation(name: "HAS_ORGANIZATION_STAFF", direction: IN)
  orgs: [Organization] @relation(name: "ENGAGED_IN", direction: OUT)
  awards: [Award] @relation(name: "WIN_AN_AWARD", direction: OUT)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  achievements: [Achievement] @relation(name: "HAS_ACHIEVEMENT", direction: OUT)
  invitations: [RespondToInvitation]
  venueManager: Venue @relation(name: "HAS_MANAGER", direction: IN)
  occupations: [Occupation] @relation(name: "USE_OCCUPATION", direction: OUT)
}

type Occupation {
  occupationId: ID! @id
  name: String
  description: String
  person: [Person] @relation(name: "TYPE_OF", direction: IN)
  team: Team @relation(name: "USE_OCCUPATION", direction: IN)
  organization: Organization @relation(name: "USE_OCCUPATION", direction: IN)
}

type User {
  userId: ID! @id
  name: String
  firstName: String!
  lastName: String!
  nickName: String
  phone: String
  email: String
  emailVerified: Boolean
  avatar: String
  locale: String
  player: Player @relation(name: "ACCOUNT_FOR", direction: OUT)
  person: Person @relation(name: "ACCOUNT_FOR", direction: OUT)
  comments: [Comment] @relation(name: "WRITE_A_COMMENT", direction: OUT)
  sentInvitations: [Invitation] @relation(name: "SENT_BY", direction: IN)
  events: [Event] @relation(name: "ORGANIZE_AN", direction: OUT)
  settings: UserSettings @relation(name: "HAS_SETTINGS", direction: OUT)
}

type UserSettings {
  userSettingsId: ID! @id
  language: String
  user: User @relation(name: "HAS_SETTINGS", direction: IN)
}

type Team {
  teamId: ID! @id
  name: String!
  fullName: String
  nick: String
  short: String
  status: String
  externalId: String
  logo: String
  primaryColor: String
  secondaryColor: String
  tertiaryColor: String
  foundDate: Date
  disabled: Boolean
  players: [Player] @relation(name: "PLAY_IN", direction: IN)

  persons: [Person] @relation(name: "HAS_TEAM_STAFF", direction: OUT)
  # gamesAsGuest: [Game] @relation(name: "PLAYS_AS_GUEST", direction: OUT)
  # gamesAsHost: [Game] @relation(name: "PLAYS_AS_HOST", direction: OUT)
  games: [TeamGame]
  # lineupsAsGuest: [Lineup] @relation(name: "DEFINES_AS_GUEST", direction: OUT)
  # lineupsAsHost: [Lineup] @relation(name: "DEFINES_AS_HOST", direction: OUT)
  # lineups: [Define]
  awards: [Award] @relation(name: "WIN_AN_AWARD", direction: OUT)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  gameEvents: [GameEvent] @relation(name: "CREATED_BY", direction: IN)
  gameEventsSimple: [GameEventSimple]
    @relation(name: "CREATED_BY", direction: IN)
  transfersFrom: [Transfer] @relation(name: "FROM_TEAM", direction: OUT)
  transfersTo: [Transfer] @relation(name: "TO_TEAM", direction: IN)
  competitions: [Competition] @relation(name: "PARTICIPATE_IN", direction: OUT)
  positions: [Position] @relation(name: "USE_POSITION", direction: OUT)
  organizations: [Organization]
    @relation(name: "PARTICIPATE_IN", direction: OUT)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  jerseys: [Jersey] @relation(name: "USE_JERSEY", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  achievements: [Achievement] @relation(name: "HAS_ACHIEVEMENT", direction: OUT)
  wear: Wear @relation(name: "HAS_WEAR", direction: OUT)
  groups: [Group] @relation(name: "PARTICIPATE_IN", direction: OUT)
  phases: [Phase] @relation(name: "PARTICIPATE_IN", direction: OUT)
  seasons: [Season] @relation(name: "PARTICIPATE_IN", direction: OUT)
  occupations: [Occupation] @relation(name: "USE_OCCUPATION", direction: OUT)
}

# type Define @relation(name: "DEFINE", from: "team", to: "lineup") {
#   team: Team
#   lineup: Lineup
#   host: Boolean
# }

# type Lineup {
#   lineupId: ID! @id
#   teams: [Define]
#   # teamGuest: Team @relation(name: "DEFINES_AS_GUEST", direction: IN)
#   # teamHost: Team @relation(name: "DEFINES_AS_HOST", direction: IN)
#   listGuest: [TakingPartIn]
#   listHost: [TakingPartIn]
#   game: Game @relation(name: "GENERATES", direction: OUT)
# }

type TakingPartIn
  @relation(name: "TAKING_PART_IN", from: "player", to: "game") {
  player: Player
  game: Game
  host: Boolean
  jersey: Int
  position: String
}

type TeamGame @relation(name: "PLAYS", from: "team", to: "game") {
  team: Team
  game: Game
  host: Boolean
}

type Game {
  gameId: ID! @id
  name: String!
  type: String
  startDate: Date
  endDate: Date
  startTime: Time
  endTime: Time
  foreignId: String
  info: String
  description: String
  teams: [TeamGame]
  players: [TakingPartIn]
  gameEvents: [GameEvent] @relation(name: "INITIATES", direction: OUT)
  gameEventsSimple: [GameEventSimple]
    @relation(name: "INITIATES_SIMPLE", direction: OUT)
  awards: [Award] @relation(name: "WIN_AN_AWARD", direction: OUT)
  # lineup: Lineup @relation(name: "GENERATES", direction: IN)
  persons: [Person] @relation(name: "HAS_GAME_STAFF", direction: OUT)
  phase: Phase @relation(name: "COMPLETE_IN", direction: OUT)
  group: Group @relation(name: "PARTICIPATE_IN", direction: OUT)
  venue: Venue @relation(name: "TAKES_PLAYS_ON", direction: OUT)
  payment: Payment @relation(name: "PAYMENT_FOR_GAME", direction: IN)
  event: Event @relation(name: "TRANSFORM_TO", direction: IN)
  rulePack: RulePack @relation(name: "GUIDED_BY", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  finalResult: FinalResult @relation(name: "COMPOSE_RESULT", direction: OUT)
  org: Organization @relation(name: "PROVIDED_BY", direction: OUT)
}

type GameEvent {
  gameEventId: ID! @id
  timestamp: String!
  location: String
  period: String
  remainingTime: String
  game: Game @relation(name: "INITIATES", direction: IN)
  goals: [Goal] @relation(name: "CREATE_GOAL", direction: OUT)
  penalties: [Penalty] @relation(name: "CREATE_PENALTY", direction: OUT)
  faceOffs: [FaceOff] @relation(name: "CREATE_FACEOFF", direction: OUT)
  passes: [Pass] @relation(name: "CREATE_PASS", direction: OUT)
  hits: [Hit] @relation(name: "CREATE_HIT", direction: OUT)
  penaltyShots: [PenaltyShot]
    @relation(name: "CREATE_PENALTY_SHOT", direction: OUT)
  shots: [Shot] @relation(name: "CREATE_SHOT", direction: OUT)
  revisions: [Revision] @relation(name: "CREATE_REVISION", direction: OUT)
  fights: [Fight] @relation(name: "CREATE_FIGHT", direction: OUT)
  intervalsOnIce: [IntervalOnIce]
    @relation(name: "CREATE_INTERVAL_ON_ICE", direction: OUT)
  icings: [Icing] @relation(name: "CREATE_ICING", direction: OUT)
  timeouts: [Timeout] @relation(name: "CREATE_TIMEOUT", direction: OUT)
  offsides: [Offside] @relation(name: "CREATE_OFFSIDE", direction: OUT)
  stars: [Star] @relation(name: "CREATE_STAR", direction: OUT)
  takeOvers: [TakeOver] @relation(name: "CREATE_TAKEOVER", direction: OUT)
  injuries: [Injury] @relation(name: "CREATE_INJURY", direction: OUT)
  team: Team @relation(name: "CREATED_BY", direction: OUT)
  saves: [Save] @relation(name: "CREATE_SAVE", direction: OUT)
  previousGameEvent: GameEvent
    @relation(name: "PREVIOUS_GAME_EVENT", direction: OUT)
  nextGameEvent: GameEvent @relation(name: "PREVIOUS_GAME_EVENT", direction: IN)
}

type GameEventSimple {
  gameEventSimpleId: ID! @id
  timestamp: String!
  location: String
  period: String
  remainingTime: String
  eventType: String
  game: Game @relation(name: "INITIATES_SIMPLE", direction: IN)
  team: Team @relation(name: "CREATED_BY", direction: OUT)
  # universal properties:
  # goal / shot / penalty / injury
  goalType: String
  goalSubType: String
  shotType: String
  shotSubType: String
  duration: Float
  description: String
  # goal:
  scoredBy: MetaPlayer @relation(name: "SCORED_BY", direction: OUT)
  allowedBy: MetaPlayer @relation(name: "ALLOWED_BY", direction: OUT)
  firstAssist: MetaPlayer @relation(name: "FIRST_ASSIST_BY", direction: OUT)
  secondAssist: MetaPlayer @relation(name: "SECOND_ASSIST_BY", direction: OUT)
  # faceOff
  lostBy: MetaPlayer @relation(name: "LOST_BY", direction: OUT)
  wonBy: MetaPlayer @relation(name: "WON_BY", direction: OUT)

  previousGameEvent: GameEventSimple
    @relation(name: "PREVIOUS_GAME_EVENT", direction: OUT)
  nextGameEvent: GameEventSimple
    @relation(name: "PREVIOUS_GAME_EVENT", direction: IN)
}

type Save {
  saveId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_SAVE", direction: IN)
  shot: Shot @relation(name: "CREATE_SAVE", direction: IN)
  metaPlayer: MetaPlayer @relation(name: "SAVED_BY", direction: OUT)
}

type Star {
  starId: ID! @id
  name: String
  gameEvent: GameEvent @relation(name: "CREATE_STAR", direction: IN)
  metaPlayer: MetaPlayer @relation(name: "IS_STAR", direction: OUT)
  award: Award @relation(name: "WIN_AN_AWARD", direction: OUT)
}

type Pass {
  passId: ID! @id
  locationStart: String
  locationEnd: String
  gameEvent: GameEvent @relation(name: "CREATE_PASS", direction: IN)
  collectBy: MetaPlayer @relation(name: "COLLECT_BY", direction: OUT)
  sentBy: MetaPlayer @relation(name: "SENT_BY", direction: OUT)
  shot: Shot @relation(name: "ASSISTANCE", direction: OUT)
}

type Offside {
  offsideId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_OFFSIDE", direction: IN)
  causedBy: MetaPlayer @relation(name: "CAUSED_BY", direction: OUT)
  checkedBy: Revision @relation(name: "CHECKED_BY", direction: OUT)
}

type Goal {
  goalId: ID! @id
  type: String
  subType: String
  gameEvent: GameEvent @relation(name: "CREATE_GOAL", direction: IN)
  scoredBy: MetaPlayer @relation(name: "SCORED_BY", direction: OUT)
  allowedBy: MetaPlayer @relation(name: "ALLOWED_BY", direction: OUT)
  shot: Shot @relation(name: "CREATED_BY", direction: OUT)
  checkedBy: Revision @relation(name: "CHECKED_BY", direction: OUT)
  canceledBy: Revision @relation(name: "CANCELED_BY", direction: OUT)
}

type Shot {
  shotId: ID! @id
  type: String
  subType: String
  target: String
  style: String
  gameEvent: GameEvent @relation(name: "CREATE_SHOT", direction: IN)
  firedBy: Player @relation(name: "FIRED_BY", direction: OUT)
  facedTo: Player @relation(name: "FACED_TO", direction: OUT)
  blockedBy: Player @relation(name: "BLOCKED_BY", direction: OUT)
  pass: Pass @relation(name: "ASSISTANCE", direction: IN)
  goal: Goal @relation(name: "CREATED_BY", direction: IN)
  penaltyShot: PenaltyShot @relation(name: "CREATED_BY", direction: OUT)
  save: Save @relation(name: "CREATE_SAVE", direction: OUT)
}

type PenaltyShot {
  penaltyShotId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_PENALTY_SHOT", direction: IN)
  penalty: Penalty @relation(name: "CREATED_BY", direction: OUT)
  facedAgainst: Player @relation(name: "FACED_AGAINST", direction: OUT)
  executedBy: Player @relation(name: "EXECUTED_BY", direction: OUT)
  shot: Shot @relation(name: "CREATED_BY", direction: IN)
  checkedBy: Revision @relation(name: "CHECKED_BY", direction: OUT)
  canceledBy: Revision @relation(name: "CANCELED_BY", direction: OUT)
  createdBy: Revision @relation(name: "CREATED_BY", direction: OUT)
}

union CheckedRevisions = Offside | Goal | PenaltyShot
union CanceledRevisions = Timeout | PenaltyShot | Goal

type Revision {
  revisionId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_REVISION", direction: IN)
  canceled: [CanceledRevisions] @relation(name: "CANCELED_BY", direction: IN)
  checked: [CheckedRevisions] @relation(name: "CHECKED_BY", direction: IN)
}

type Timeout {
  timeoutId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_TIMEOUT", direction: IN)
  canceledBy: Revision @relation(name: "CANCELED_BY", direction: OUT)
}

type Penalty {
  penaltyId: ID! @id
  type: String
  subType: String
  duration: Float
  gameEvent: GameEvent @relation(name: "CREATE_PENALTY", direction: IN)
  penalized: Player @relation(name: "PENALIZED", direction: OUT)
  penaltyShot: PenaltyShot @relation(name: "CREATED_BY", direction: IN)
  suspension: Suspension @relation(name: "CREATE_SUSPENSION", direction: OUT)
}

type IntervalOnIce {
  intervalOnIceId: ID! @id
  endTime: DateTime
  duration: Float
  gameEvent: GameEvent @relation(name: "CREATE_INTERVAL_ON_ICE", direction: IN)
  spentBy: Player @relation(name: "SPENT_BY", direction: OUT)
}

type Fight {
  fightId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_FIGHT", direction: IN)
  players: [Player] @relation(name: "PARTICIPATE_IN", direction: OUT)
}

type FaceOff {
  faceOffId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_FACEOFF", direction: IN)
  lostBy: Player @relation(name: "LOST_BY", direction: OUT)
  wonBy: Player @relation(name: "WON_BY", direction: OUT)
}

type Icing {
  icingId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_ICING", direction: IN)
  causedBy: Player @relation(name: "CAUSED_BY", direction: OUT)
}

type TakeOver {
  takeOverId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_TAKEOVER", direction: IN)
  lostBy: MetaPlayer @relation(name: "LOST_BY", direction: OUT)
  richedBy: MetaPlayer @relation(name: "RICHED_BY", direction: OUT)
}

type Hit {
  hitId: ID! @id
  gameEvent: GameEvent @relation(name: "CREATE_HIT", direction: IN)
  giveBy: MetaPlayer @relation(name: "GIVE_BY", direction: OUT)
}

type Injury {
  injuryId: ID! @id
  description: String
  startDate: Date
  endDate: Date
  type: String
  gameEvent: GameEvent @relation(name: "CREATE_INJURY", direction: IN)
  availabilityStatus: AvailabilityStatus
    @relation(name: "SUFFERED_AN", direction: OUT)
}

#urbis: zde mám pocit že se hodí dát property injury type: Covid;Illnes;Upperbody;Lowerbody apd..
#vlad : VYMYSLET
# a opět zda je injury valid nebo již recovered? jakože už skončilo a opět ovlivní Availatility status

type Suspension {
  suspensionId: ID! @id
  description: String
  startDate: Date
  endDate: Date
  availabilityStatus: AvailabilityStatus
    @relation(name: "HAS_AN_IMPACT", direction: OUT)
  penalty: Penalty @relation(name: "CREATE_SUSPENSION", direction: IN)
}

#vlad : VYMYSLET
#urbis: zde musíme nějak vyřešit že Suspension start date is: Suspension end date is: a pokud je suspension již ukončená ovlivní to zase Availability status.. chápeš?

type AvailabilityStatus {
  availabilityStatusId: ID! @id
  metaPlayer: MetaPlayer @relation(name: "GAME_READY_FOR", direction: OUT)
  injuries: Injury @relation(name: "SUFFERED_AN", direction: IN)
  suspensions: Suspension @relation(name: "HAS_AN_IMPACT", direction: IN)
}

type Transfer {
  transferId: ID! @id
  date: Date
  teamFrom: Team @relation(name: "FROM_TEAM", direction: IN)
  teamTo: Team @relation(name: "TO_TEAM", direction: OUT)
  metaPlayer: MetaPlayer @relation(name: "TRANSFER_FOR_PLAYER", direction: OUT)
}

type Discussion {
  discussionId: ID! @id
  comments: [Comment] @relation(name: "CONTAINS", direction: OUT)
  game: Game @relation(name: "HAS_DISCUSSION", direction: IN)
  competition: Competition @relation(name: "HAS_DISCUSSION", direction: IN)
  person: Person @relation(name: "HAS_DISCUSSION", direction: IN)
  organization: Organization @relation(name: "HAS_DISCUSSION", direction: IN)
  group: Group @relation(name: "HAS_DISCUSSION", direction: IN)
  phase: Phase @relation(name: "HAS_DISCUSSION", direction: IN)
  award: Award @relation(name: "HAS_DISCUSSION", direction: IN)
  sponsor: Sponsor @relation(name: "HAS_DISCUSSION", direction: IN)
  metaPlayer: MetaPlayer @relation(name: "HAS_DISCUSSION", direction: IN)
  team: Team @relation(name: "HAS_DISCUSSION", direction: IN)
  file: File @relation(name: "HAS_DISCUSSION", direction: IN)
}

type Comment {
  commentId: ID! @id
  text: String
  dateTime: DateTime
  previousComment: Comment @relation(name: "PREVIOUS_COMMENT", direction: OUT)
  nextComment: Comment @relation(name: "PREVIOUS_COMMENT", direction: IN)
  replyTo: Comment @relation(name: "REPLY_TO", direction: OUT)
  repliedTo: [Comment] @relation(name: "REPLY_TO", direction: IN)
  discussion: Discussion @relation(name: "CONTAINS", direction: IN)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  author: User @relation(name: "WRITE_A_COMMENT", direction: IN)
}

type Organization {
  organizationId: ID! @id
  name: String
  nick: String
  short: String
  status: String
  foundDate: Date
  legalName: String
  logo: String
  urlSlug: String
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  persons: [Person] @relation(name: "HAS_ORGANIZATION_STAFF", direction: OUT)
  payments: [Payment] @relation(name: "RECEIVES_PAYMENT", direction: IN)
  competitions: [Competition] @relation(name: "OWNED_BY", direction: IN)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  rulePacks: [RulePack] @relation(name: "GUIDED_BY", direction: OUT)
  teams: [Team] @relation(name: "PARTICIPATE_IN", direction: IN)
  occupations: [Occupation] @relation(name: "USE_OCCUPATION", direction: OUT)
  orgPersons: [Person] @relation(name: "ENGAGED_IN", direction: IN)
  orgSponsors: [Sponsor] @relation(name: "ENGAGED_IN", direction: IN)
  orgAwards: [Award] @relation(name: "PROVIDED_BY", direction: IN)
  orgRulePacks: [RulePack] @relation(name: "PROVIDED_BY", direction: IN)
  orgEvents: [Event] @relation(name: "CREATE_IN", direction: IN)
  orgGames: [Game] @relation(name: "PROVIDED_BY", direction: IN)
}

type Sponsor {
  sponsorId: ID! @id
  name: String
  nick: String
  short: String
  claim: String
  web: String
  description: String
  legalName: String
  logo: String
  players: [Player] @relation(name: "SPONSORED_BY", direction: IN)
  teams: [Team] @relation(name: "SPONSORED_BY", direction: IN)
  person: [Person] @relation(name: "SPONSORED_BY", direction: IN)
  awards: [Award] @relation(name: "SPONSORED_BY", direction: IN)
  competitions: [Competition] @relation(name: "SPONSORED_BY", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  phases: [Phase] @relation(name: "SPONSORED_BY", direction: IN)
  groups: [Group] @relation(name: "SPONSORED_BY", direction: IN)
  orgs: [Organization] @relation(name: "ENGAGED_IN", direction: OUT)
}

type Venue {
  venueId: ID! @id
  name: String
  nick: String
  short: String
  web: String
  description: String
  location: String
  foundDate: Date
  capacity: Int
  logo: String
  competitions: [Competition] @relation(name: "TAKES_PLAYS_ON", direction: IN)
  games: [Game] @relation(name: "TAKES_PLAYS_ON", direction: IN)
  address: Address @relation(name: "LOCATED_AT", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  managers: [Person] @relation(name: "HAS_MANAGER", direction: OUT)
  seasons: [Season] @relation(name: "TAKES_PLAYS_ON", direction: IN)
  phases: [Phase] @relation(name: "TAKES_PLAYS_ON", direction: IN)
  groups: [Group] @relation(name: "TAKES_PLAYS_ON", direction: IN)
  awards: [Award] @relation(name: "HAS_AN_AWARD", direction: OUT)
}

type Address {
  addressId: ID! @id
  addressLine1: String
  addressLine2: String
  addressLine3: String
  city: String
  countyProvince: String
  zip: String
  country: String
  other: String
  latitude: Float
  longitude: Float
  addressType: String
  venue: Venue @relation(name: "LOCATED_AT", direction: IN)
  events: [Event] @relation(name: "TAKES_PLACE_AT", direction: IN)
}

type Competition {
  competitionId: ID! @id
  name: String
  nick: String
  short: String
  foundDate: Date
  status: String
  logo: String
  organization: Organization @relation(name: "OWNED_BY", direction: OUT)
  rulePacks: [RulePack] @relation(name: "GUIDED_BY", direction: OUT)
  events: [Event] @relation(name: "ORGANIZE_AN", direction: OUT)
  venues: [Venue] @relation(name: "TAKES_PLAYS_ON", direction: OUT)
  phases: [Phase] @relation(name: "DIVIDED", direction: OUT)
  groups: [Group] @relation(name: "DIVIDED", direction: OUT)
  seasons: [Season] @relation(name: "BELONGS_TO", direction: OUT)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  awards: [Award] @relation(name: "BELONGS_TO", direction: IN)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  persons: [Person] @relation(name: "HAS_COMPETITION_STAFF", direction: OUT)
  teams: [Team] @relation(name: "PARTICIPATE_IN", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  metaHistories: [MetaHistory] @relation(name: "PARTICIPATE_IN", direction: IN)
}

# union EventOrganizer = Competition | Team | User

type Event {
  eventId: ID! @id
  name: String
  description: String
  date: Date
  time: Time
  logo: String
  address: Address @relation(name: "TAKES_PLACE_AT", direction: OUT)
  organizer: User @relation(name: "ORGANIZE_AN", direction: IN)
  game: Game @relation(name: "TRANSFORM_TO", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  invitation: Invitation @relation(name: "CREATE_INVITATION", direction: OUT)
  invitationList: InvitationList
    @relation(name: "CREATE_INVITATION_LIST", direction: OUT)
  org: Organization @relation(name: "CREATE_IN", direction: OUT)
}

type Season {
  seasonId: ID! @id
  name: String
  nick: String
  short: String
  startDate: Date
  endDate: Date
  competitions: [Competition] @relation(name: "BELONGS_TO", direction: IN)
  teamWears: [Wear] @relation(name: "WEAR_FOR", direction: IN)
  venues: [Venue] @relation(name: "TAKES_PLAYS_ON", direction: OUT)
  phases: [Phase] @relation(name: "BELONGS_TO", direction: IN)
  groups: [Group] @relation(name: "BELONGS_TO", direction: IN)
  awards: [Award] @relation(name: "HAS_AN_AWARD", direction: OUT)
  teams: [Team] @relation(name: "PARTICIPATE_IN", direction: IN)
  metaHistories: [MetaHistory] @relation(name: "PARTICIPATE_IN", direction: IN)
}

type Group {
  groupId: ID! @id
  name: String!
  nick: String
  short: String
  teamsLimit: Int
  competition: Competition @relation(name: "DIVIDED", direction: IN)
  rulePack: RulePack @relation(name: "GUIDED_BY", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  games: [Game] @relation(name: "PARTICIPATE_IN", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  awards: [Award] @relation(name: "BELONGS_TO", direction: IN)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  season: Season @relation(name: "BELONGS_TO", direction: OUT)
  venue: [Venue] @relation(name: "TAKES_PLAYS_ON", direction: OUT)
  phase: Phase @relation(name: "BELONGS_TO", direction: OUT)
  teams: [Team] @relation(name: "PARTICIPATE_IN", direction: IN)
}

# TODO: make rule CompetitionPhaseStatuses
# enum phaseStatus {
#   NOTSTARTED
#   RUNNING
#   FINISHED
#   POSTPONED
# }

type Phase {
  phaseId: ID! @id
  name: String!
  nick: String
  short: String
  startDate: Date
  endDate: Date
  status: String
  competition: Competition @relation(name: "DIVIDED", direction: IN)
  rulePack: RulePack @relation(name: "GUIDED_BY", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  games: [Game] @relation(name: "COMPLETE_IN", direction: IN)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  awards: [Award] @relation(name: "BELONGS_TO", direction: IN)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  season: Season @relation(name: "BELONGS_TO", direction: OUT)
  venues: [Venue] @relation(name: "TAKES_PLAYS_ON", direction: OUT)
  groups: [Group] @relation(name: "BELONGS_TO", direction: IN)
  teams: [Team] @relation(name: "PARTICIPATE_IN", direction: IN)
}

type Payment {
  paymentId: ID! @id
  dateTime: DateTime
  initiator: Person @relation(name: "INITIATES_PAYMENT", direction: IN)
  receiver: Organization @relation(name: "RECEIVES_PAYMENT", direction: OUT)
  game: Game @relation(name: "PAYMENT_FOR_GAME", direction: OUT)
}

#urbis: zde jsem stále zamotaný podle mě těch vztahů tady bude více.. ale nedokáži to vymyslet zatím odkládám

type Award {
  awardId: ID! @id
  name: String
  nick: String
  short: String
  description: String
  type: String
  foundDate: Date
  seasons: [Season] @relation(name: "HAS_AN_AWARD", direction: IN)
  competitions: [Competition] @relation(name: "BELONGS_TO", direction: OUT)
  phases: [Phase] @relation(name: "BELONGS_TO", direction: OUT)
  groups: [Group] @relation(name: "BELONGS_TO", direction: OUT)
  teams: [Team] @relation(name: "WIN_AN_AWARD", direction: IN)
  games: [Game] @relation(name: "HAS_AN_AWARD", direction: IN)
  players: [Player] @relation(name: "WIN_AN_AWARD", direction: IN)
  person: [Person] @relation(name: "WIN_AN_AWARD", direction: IN)
  venue: Venue @relation(name: "HAS_AN_AWARD", direction: IN)
  stars: [Star] @relation(name: "WIN_AN_AWARD", direction: IN)
  sponsors: [Sponsor] @relation(name: "SPONSORED_BY", direction: OUT)
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  orgs: [Organization] @relation(name: "PROVIDED_BY", direction: OUT)
}

type Media {
  mediaId: ID! @id
  organization: Organization @relation(name: "HAS_MEDIA", direction: IN)
  phase: Phase @relation(name: "HAS_MEDIA", direction: IN)
  group: Group @relation(name: "HAS_MEDIA", direction: IN)
  sponsor: Sponsor @relation(name: "HAS_MEDIA", direction: IN)
  award: Award @relation(name: "HAS_MEDIA", direction: IN)
  player: Player @relation(name: "HAS_MEDIA", direction: IN)
  team: Team @relation(name: "HAS_MEDIA", direction: IN)
  comment: Comment @relation(name: "HAS_MEDIA", direction: IN)
  person: Person @relation(name: "HAS_MEDIA", direction: IN)
  game: Game @relation(name: "HAS_MEDIA", direction: IN)
  competition: Competition @relation(name: "HAS_MEDIA", direction: IN)
  event: Event @relation(name: "HAS_MEDIA", direction: IN)
  wear: WearItem @relation(name: "HAS_MEDIA", direction: IN)
  venue: Venue @relation(name: "HAS_MEDIA", direction: IN)
  invitation: Invitation @relation(name: "HAS_MEDIA", direction: IN)
  files: [File] @relation(name: "HAS_FILE", direction: OUT)
}

type File {
  fileId: ID! @id
  name: String
  description: String
  type: String #isLogo, isCover, isProfilePicture, isGameCoveredge
  url: String
  discussion: Discussion @relation(name: "HAS_DISCUSSION", direction: OUT)
  media: Media @relation(name: "HAS_FILE", direction: IN)
}

type Invitation {
  invitationId: ID! @id
  name: String
  description: String
  event: Event @relation(name: "CREATE_INVITATION", direction: IN)
  sentBy: User @relation(name: "SENT_BY", direction: OUT)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
  invitationList: InvitationList @relation(name: "HAS_LIST", direction: OUT)
}

type InvitationList {
  invitationListId: ID! @id
  event: Event @relation(name: "CREATE_INVITATION_LIST", direction: IN)
  invitation: Invitation @relation(name: "HAS_LIST", direction: IN)
  users: [RespondToInvitation]
}

type RespondToInvitation @relation(name: "RESPOND_TO_INVITATION") {
  from: User
  to: InvitationList
  status: String
}

type Achievement {
  achievementId: ID! @id
  name: String
  description: String
  rule: String
  players: [Player] @relation(name: "HAS_ACHIEVEMENT", direction: IN)
  person: [Person] @relation(name: "HAS_ACHIEVEMENT", direction: IN)
  teams: [Team] @relation(name: "HAS_ACHIEVEMENT", direction: IN)
}

type RulePack {
  rulePackId: ID! @id
  name: String
  createdAt: DateTime
  organizations: [Organization] @relation(name: "GUIDED_BY", direction: IN)
  phases: [Phase] @relation(name: "GUIDED_BY", direction: IN)
  groups: [Group] @relation(name: "GUIDED_BY", direction: IN)
  games: [Game] @relation(name: "GUIDED_BY", direction: IN)
  competitions: [Competition] @relation(name: "GUIDED_BY", direction: IN)
  penaltyShotStatuses: [PenaltyShotStatus]
    @relation(name: "SET_UP", direction: OUT)
  periods: [Period] @relation(name: "SET_UP", direction: OUT)
  shotTargets: [ShotTarget] @relation(name: "SET_UP", direction: OUT)
  shotStyles: [ShotStyle] @relation(name: "SET_UP", direction: OUT)
  shotTypes: [ShotType] @relation(name: "SET_UP", direction: OUT)
  goalTypes: [GoalType] @relation(name: "SET_UP", direction: OUT)
  penaltyTypes: [PenaltyType] @relation(name: "SET_UP", direction: OUT)
  gameEventLocations: [GameEventLocation]
    @relation(name: "SET_UP", direction: OUT)
  positionTypes: [PositionType] @relation(name: "SET_UP", direction: OUT)
  injuryTypes: [InjuryType] @relation(name: "SET_UP", direction: OUT)
  resultTypes: [ResultType] @relation(name: "SET_UP", direction: OUT)
  resultPoints: [ResultPoint] @relation(name: "SET_UP", direction: OUT)
  systemSettings: SystemSettings
    @relation(name: "GUIDED_DEFAULT_BY", direction: IN)
  orgs: [Organization] @relation(name: "PROVIDED_BY", direction: OUT)
}

type PenaltyShotStatus {
  penaltyShotStatusId: ID! @id
  name: String!
  code: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type Period {
  periodId: ID! @id
  name: String!
  code: String
  duration: Float!
  priority: Int
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type ShotTarget {
  shotTargetId: ID! @id
  name: String!
  code: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type ShotStyle {
  shotStyleId: ID! @id
  name: String!
  code: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type ShotType {
  shotTypeId: ID! @id
  name: String!
  code: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
  subTypes: [ShotSubType] @relation(name: "SET_UP", direction: OUT)
}

type ShotSubType {
  shotSubTypeId: ID! @id
  name: String!
  code: String!
  shotType: [ShotType] @relation(name: "SET_UP", direction: IN)
}

type GoalType {
  goalTypeId: ID! @id
  name: String!
  code: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
  subTypes: [GoalSubType] @relation(name: "SET_UP", direction: OUT)
}

type GoalSubType {
  goalSubTypeId: ID! @id
  name: String!
  code: String!
  goalType: GoalType @relation(name: "SET_UP", direction: IN)
}

type PenaltyType {
  penaltyTypeId: ID! @id
  name: String!
  code: String!
  duration: Float!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
  subTypes: [PenaltySubType] @relation(name: "SET_UP", direction: OUT)
}

type PenaltySubType {
  penaltySubTypeId: ID! @id
  name: String!
  code: String!
  penaltyType: PenaltyType @relation(name: "SET_UP", direction: IN)
}

type GameEventLocation {
  gameEventLocationId: ID! @id
  name: String!
  fieldX: String!
  fieldY: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type PositionType {
  positionTypeId: ID! @id
  name: String!
  short: String
  description: String
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type Wear {
  wearId: ID! @id
  name: String!
  description: String
  items: [WearItem] @relation(name: "HAS_WEAR_ITEM", direction: OUT)
  team: Team @relation(name: "HAS_WEAR", direction: IN)
  seasons: [Season] @relation(name: "WEAR_FOR", direction: OUT)
}

# A pozor jsou týmy které mohou mít 3 série dresů - a samozřejmě vyvíjí se v čase, tedy nabízí se nám spíše to že Jersey (nebo ještě lépe vyrobíme entitu Wear (merch nebo prostě oblečení) ta bude mít vztah na Tým, Asociaci, Competition apd.. a jeden z proprieties bude Wear: Jersey a to bude mít vztah na Media) tím zajistíme že jich můžeme mít "nekonečně mnoho" dresů pro tým a ke každému Wear ještě dodáme vztah na "season" abychom označili v jaké sezoně jaké dresy (a jiné klubové oblečení) ten tým má / toto trochu bude pomáhat do budoucna i s e-shopem prodejem týmového oblečení (ale to do budoucna)  - viz příloha screenshot (existuje prostě 10k dresů za historii týmu)

type WearItem {
  wearItemId: ID! @id
  name: String!
  type: String
  wear: Wear @relation(name: "HAS_WEAR_ITEM", direction: IN)
  jersey: Jersey @relation(name: "FOR_JERSEY", direction: IN)
  media: Media @relation(name: "HAS_MEDIA", direction: OUT)
}

type Position {
  positionId: ID! @id
  name: String!
  short: String
  description: String
  players: [Player] @relation(name: "HAS_POSITION", direction: IN)
  team: Team @relation(name: "USE_POSITION", direction: IN)
}

type Jersey {
  jerseyId: ID! @id
  name: String!
  number: Int!
  player: Player @relation(name: "HAS_JERSEY", direction: IN)
  team: Team @relation(name: "USE_JERSEY", direction: IN)
  wearItem: WearItem @relation(name: "FOR_JERSEY", direction: IN)
}

type FinalResult {
  finalResultId: ID! @id
  game: Game @relation(name: "COMPOSE_RESULT", direction: IN)
  # TODO: fields
}

type InjuryType {
  injuryTypeId: ID! @id
  name: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type ResultType {
  resultTypeId: ID! @id
  name: String!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

type ResultPoint {
  resultPointId: ID! @id
  name: String!
  code: String!
  points: Int!
  rulePack: RulePack @relation(name: "SET_UP", direction: IN)
}

# SystemSettings entity should be only one in the whole DB.
# That why systemSettingsId = "system-settings"
type SystemSettings {
  systemSettingsId: ID! @id
  name: String
  language: String
  rulePack: RulePack @relation(name: "GUIDED_DEFAULT_BY", direction: OUT)
}

#urbis: NOVÉ ENTITY

# Position - má vztah na RulePack - vytovříme seznam pozic kterými si pak řídí jednotlivé Competitions, Games, apd..
# Position má pak vztah na hráče

# Jersey - číslo hráče na dresu - to je něco co musíme mít jako ke každému týmu je dostupných 0-99 Jersey a tato entita buď má vztah na hráče nebo nemá pokud nemá je toto číslo hráče volné = "not_Assigned" pokud je obsazené tak je "taken_by" Player

# Wear nebo Merch (bude možná lepší pojmenovat Merch)

# - tím zajistíme možnost zakládat různé ať již dresy, nebo jiné produkty které mají vztah na Tým nebo Asociaci nebo na Organizaci, Competition a samozřejmě vztah na Media (protože se ktomu vztahuje nějaký obrázek) a vztah na Season

# nahrazuje property v týmu Jersey Dark a JerseyLight ta bude nahrazena touto entitou a může jich být více

# NOTIFICATION

# - musíme ji zadata ať ten systém posílá informace lidem / týmům

# například Invitation

# změna Availabitility statusu apd..
# toto je velmi podstatné :)

# A myslím že je nutné zavést něco jako entita "final_result"
# - protože například na dotaz ukaž mi výsledky týmu by si musel dnes vznést dotaz
# najdí tým - všechny jeho games v games hledej game event typu goal fired a game event typu goal allowed
# no a to při 100 zápasech bude těžký dotaz.. ideální by bylo po konci utkání vygenerovat Entitu
# FINAL RESULTS - a tam se ti vypočítá kolik dal tým golů, kolik dal střel, kolik penalty apd.. a to by se uložilo do Final results jako hodnoty v entitě protože pak většina dotazů bude moct být výrazně rychlejších.. co si o tom myslíš?

# - zde si myslím že budou další RulePack které budeme muset vytvořit jako RESULT_TYPE (hodnoty: WIN,LOST,TIE)
#vlad TODO: entita RESULT_TYPE
#vlad TODO: entita RESULT_POINTS
#vlad TODO: entita final_result

# RESULT_POINTS (tam bude moct být vazba na WIN nebo LOST TIE  a dodá body zda získá 3body, 2body, 1bod, 0bodů)

# - STORY

# - jedná se op přípravu na generované texty - nevím zda to je entita, ale řekněme že každá entita může k sobě mít nějaký text který se na základě vzniku této entity vytovoří
# například Entita GameEvent Gola má k sobě informace - Player GoalType Timestamp apd.. a tedy by měl někde vzniknout text "story" který bude znít například takto: "V čase 14:27 vstřelil gól po tvrdé střele hráč z týmu Barcelona Lionel Messi"

# - nebo entita Star by měla vygenerovat text (story): "V zápase ID 20003 získal titul Hvězda utkání hráč Martin Novák z týmu Real Madrid"
